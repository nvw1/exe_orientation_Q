
<!DOCTYPE html>
<html>
<script src="qr_packed.js"></script>

<style>

body, input {font-size:14pt}
input, label {vertical-align:middle}
.qrcode-text-btn {display:inline-block; background:url(1499401426qr_icon.svg) 50% 50% no-repeat; height:1em; width:1.7em; cursor:pointer}
.qrcode-text-btn > input[type=file] {position:absolute; overflow:hidden; width:1px; height:1px; opacity:0}

</style>

<body>

	<label class=qrcode-text-btn>
		<input type=file accept="image/*" capture=environment onchange="openQRCamera(this);" tabindex=-1>
	</label> 
	

<input type=button value="Submit Answer">

</body>
<script>

var answer = null;

function openQRCamera(node) {
  var reader = new FileReader();
  reader.onload = function() {
    node.value = "";
    qrcode.callback = function(res) {
      if(res instanceof Error) {
        alert("No QR code found. Please make sure the QR code is within the camera's frame and try again.");
      } else {
         answer = res;
      }
    };
    qrcode.decode(reader.result);
  };
  reader.readAsDataURL(node.files[0]);
}
</script>

</html>