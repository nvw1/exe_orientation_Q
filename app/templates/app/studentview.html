{% load static %}
<!-- Authors: Hao, Nik -->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Mobile Specific Metas
    –––––––––––––––––––––––––––––––––––––––––––––––––– -->
	<!--<meta name="viewport" content="width=device-width, initial-scale=1"> -->
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

    <meta charset="UTF-8">
	<title>Title</title>
  <link rel="stylesheet" href="{%static 'css/all.css' %}"></link>
  <style>
.observablehq {
  opacity: 1;
  transition: opacity 250ms ease-in-out;
}
.browser-firefox .observablehq {
  transition: opacity 250ms ease-in-out 250ms;
}
.observablehq--running {
  opacity: 0;
}
.os-ios #gradient {
  filter: saturate(150%);
  -webkit-filter: saturate(150%);
}
.form{
	background-color: transparent;
}
.overlay {
  height: 100%;
  width: 0;
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  background-color: rgb(0,0,0);
  background-color: rgba(0,0,0, 0.9);
  overflow-x: hidden;
  transition: 0.5s;
}

.overlay-content {
  position: relative;
  top: 25%;
  width: 100%;
  text-align: center;
  margin-top: 30px;
}

.overlay a {
  padding: 8px;
  text-decoration: none;
  font-size: 36px;
  color: #818181;
  display: block;
  transition: 0.3s;
}

.overlay a:hover, .overlay a:focus {
  color: #f1f1f1;
}

.overlay .closebtn {
  position: absolute;
  top: 20px;
  right: 45px;
  font-size: 60px;
}

@media screen and (max-height: 450px) {
  .overlay a {font-size: 20px}
  .overlay .closebtn {
  font-size: 40px;
  top: 15px;
  right: 35px;
  }
}
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  padding-top: 100px; /* Location of the box */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content */
.modal-content {
  position: relative;
  background-color: #fefefe;
  margin: auto;
  padding: 0;
  border: 1px solid #888;
  width: 80%;
  box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
  -webkit-animation-name: animatetop;
  -webkit-animation-duration: 0.4s;
  animation-name: animatetop;
  animation-duration: 0.4s
}

/* Add Animation */
@-webkit-keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

@keyframes animatetop {
  from {top:-300px; opacity:0}
  to {top:0; opacity:1}
}

/* The Close Button */
.close {
  color: white;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: #000;
  text-decoration: none;
  cursor: pointer;
}

.modal-header {
  padding: 2px 16px;
  background-color: #5cb85c;
  color: white;
}

.modal-body {padding: 2px 16px;}

.modal-footer {
  padding: 2px 16px;
  background-color: #5cb85c;
  color: white;
}

img.avatar {
  width: 40%;
  border-radius: 50%;
}

.container {
  padding: 16px;
}

span.psw {
  float: right;
  padding-top: 16px;
}
      #map {
        height: 100%;
      }

	        html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
</style>




<link rel="shortcut icon" href="/favicon.png" />
<link rel="apple-touch-icon" href="/favicon.png" />
<script type="text/javascript">document.documentElement.className = 'js';</script>
  <meta name="description" content="OpenAI is an AI research laboratory discovering and enacting the path to safe artificial general intelligence." />
    <link rel="shortcut icon" href="/favicon.png" type="image/png" />
    <link rel="canonical" href="https://openai.com/" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

    <meta property="og:site_name" content="OpenAI" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="OpenAI" />
    <meta property="og:description" content="OpenAI is an AI research laboratory discovering and enacting the path to safe artificial general intelligence." />
    <meta property="og:url" content="https://openai.com/" />
    <meta property="og:image" content="https://openai.com/content/images/2019/05/openai-cover.png" />
    <meta property="og:image:width" content="2400" />
    <meta property="og:image:height" content="1350" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "OpenAI",
        "logo": {
            "@type": "ImageObject",
            "url": "https://openai.com/content/images/2019/05/openai-avatar.png",
            "width": 60,
            "height": 60
        }
    },
    "author": {
        "@type": "Person",
        "name": "OpenAI",
        "sameAs": []
    },
    "headline": "OpenAI",
    "url": "https://openai.com/",
    "description": "Discovering and enacting the path \nto safe artificial general intelligence.",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://openai.com/"
    }
}
    </script>
	<script type="module">
		import {Runtime, Inspector, Library} from "https://cdn.openai.com/home/20200218a/runtime.js";
		import notebook from "https://cdn.openai.com/home/20200218a/home.js"
		const renders = {
		  "gradient": "#gradient",
		};
		new Runtime(Object.assign(new Library)).module(notebook, name => {
		  const selector = renders[name];
		  if (selector) { // key exists
			return new Inspector(document.querySelector(selector));
		  } else {
			return true;
		  }
		});
		</script>
    <script defer src="{% static "js/members.js" %}"></script>
    <script type="text/javascript" src="{% static "js/config.js" %}"></script>
    <meta name="generator" content="Ghost 3.7" />
    <link rel="alternate" type="application/rss+xml" title="OpenAI" href="" />
  <link rel="shortcut icon" href="/favicon.png" />
  <link rel="apple-touch-icon" href="/favicon.png" />
</head>

<body>


<div id="myNav" class="overlay">
  <div class="overlay-content"><a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
    <a href="/faq">FAQ</a>
    <a href="#"></a>
    <a href="contact">Contact</a>
  </div>

</div>

<div class="color-bg mb-2 mb-lg-2.5 position-relative">

	<header class="header header--cover">
		<nav class="nav js-nav">
		<div class="container">
		  <div class="nav-row row d-flex justify-content-between align-items-center">
			<div class="col-2">
			  <a href="/" class="nav-symbol fade">
				<img src="{% static 'images/logo2.png' %}" ></img>
				</div>
			<div class="col" >
			  <a href="/" class="nav-wordmark fade">
				<h3 style="width:200px; padding-left: -20">Infinity Hunt</h3>
				</div>
			<div class="col-auto">
			  <ul class="nav-items d-none d-desktop-flex justify-content-end small-caps">

				  <li class="nav-item">
					<a class="fade" href="{}"></a>
				  </li>

				  <li class="nav-item">
					<a class="fade" href="/progress/"></a>
				  </li>


			  </ul>
			  <span style="font-size:30px;cursor:pointer" onclick="openNav()">&#9776; Menu</span>
			</div>
		  </div>
		</div>
	  </nav>
	  <nav class="mobile-nav js-mobile-nav text-left">
		<div class="container">
		  <div class="nav-row row d-flex justify-content-between align-items-center">
			<div class="col-2">
			</div>
			<div class="col-auto">
			  <button class="nav-toggle nav-toggle--close js-mobile-nav-close"><svg id="mobile-nav-close" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path id="Glyph" d="M19.77,5.63,13.41,12l6.36,6.37a1,1,0,0,1-1.41,1.41L12,13.41,5.63,19.77a1,1,0,0,1-1.44-1.39l0,0L10.58,12,4.21,5.63a1,1,0,0,1,0-1.42,1,1,0,0,1,1.41,0l0,0L12,10.58l6.37-6.37a1,1,0,0,1,1.41,0A1,1,0,0,1,19.77,5.63Z"/></svg></button>
			</div>
		  </div>
		</div>
		<div class="container font-large">
		  <ul class="mt-0.25 small-caps">

				<li>
				  <a class="fade d-block py-0.75" href="/about/">About</a>
				</li>
				<hr class="bg-fg">

				<li>
				  <a class="fade d-block py-0.75" href="/progress/">Progress</a>
				</li>
				<hr class="bg-fg">

				<li>
				  <a class="fade d-block py-0.75" href="/resources/">Resources</a>
				</li>
				<hr class="bg-fg">

				<li>
				  <a class="fade d-block py-0.75" href="/blog/">Blog</a>
				</li>
				<hr class="bg-fg">
			<li>
			  <a class="fade d-block py-0.75" href="/jobs/">Jobs</a>
			</li>
		  </ul>
		</div>
	  </nav>

	  </header>

	  {% block content %}
	  <!--first section-->

	  <div class="container color-white">
		<hr class="hr-strong js-nav-fold">
		<section class="mt-1 mb-1.5">
		  <div class="row">
			<div class="col-12 col-md-2">
			  <h6 class="small-copy mb-0.5 mt-0.125">This is your group code
                  <button id="myBtn">Open Modal</button>
			</div>
			<div class="col-12 col-md-10 col-lg-8">
				<h1 class="balance-text h2 font-normal" style="margin-left:-0.1rem;max-width:28rem"># :{{ groupcode }} </h1>
               <h1 class="balance-text h2 font-normal" style="margin-left:-0.1rem;max-width:28rem" id = "score">Hello</h1>
			  <a class="btn icon-next right fade mt-0.5 color-bg-65" href="/">Sign out</a>
			</div>
		  </div>
		</section>
	  </div>

	  <!--Question section v1-->
	  {% for questions in data %}
	  <div class="container color-white">
		<hr class="hr-strong js-nav-fold">
		<section class="mt-1 mb-1.5">
		  <div class="row">
			<div class="col-12 col-md-2">
			  <h6 class="small-copy mb-0.5 mt-0.125">Enjoy the Game!</h6>
			</div>
			<div class="col-12 col-md-10 col-lg-8">
				<h1 class="balance-text h2 font-normal" style="margin-left:-0.1rem;max-width:28rem">{{ questions.questions}}</h1>
                <button id = "button_1" value = "val_1">reset questions<</button>
                <script>
                    var b = {{ questions.questions }}
                </script>
			</div>
		  </div>
		</section>
	  </div>

	  <!--Question section v2-->

	  <section class="pb-1">
		<div class="container color-white">
		  <hr class="mb-0.75 hr-strong">
		  <h6 class="small-copy">Below is where it counts.</h6>
		</div>
		<div class="overflow-hidden">
		  <div class="overflow-x-auto mb-n2 pb-2">
			<div class="container">
			  <div class="row flex-nowrap flex-lg-wrap">
					<div class="col-12 col-sm-12 col-md-12 col-lg-6 col-xl-3 mt-gutter mb-gutter mb-md-gutter">

	<figure class="release-cover release-cover--titled rounded shadowed-heavy mb-0" style="background-color: transparent;">
		<br>
		<h1 class="balance-text h2 font-normal" ><center>Type answer below:</center></h1>
        <br>
        <br>
		<form class="container" action="redirect" method = "post" id="question"  >
			{% csrf_token %}
				 <input class="small-copy mb-0.5 mt-0.125" type="text" name="answer" placeholder="Enter your answer" style="display: block; margin: 0 auto;">
		   <br>
		   <br>
                <button class="small-copy mb-0.5 mt-0.125" name = gethaction id = "gethint" style="display: block; margin: 0 auto;" > Feeling stuck and need a hint? Click me!</button>
            <br>
            <br>
			{%if messages%}
				   {% for message in messages %}
					   <div class="alert alert-danger" role="alert" style="color:black">
						   {{ message }}
					   </div>
				   {% endfor%}
                <br>
			   {% endif %}

	</figure>
					</div>
				  <div class="pl-container ml-row"></div>
			  </div>
			</div>
		  </div>
		</div>
		<div class="container color-white mt-0.5">
		  <div class="text-center"><a class="btn icon-next right" >
			<input class="btn  icon-next right fade color-bg-65" type="submit" value="ANSWER " name="submit-question" style=""></a>

		</div>

		</div>
	  </section>
	</form>





{% endfor %}
{% endblock %}
<div class="position-absolute w-100 h-100 overflow-hidden bg-cool-gray-1 bg-cover trbl-0" style="z-index:-1;pointer-events:none">
	<div id="gradient" class="position-absolute d-flex justify-content-center align-items-center overflow-hidden trbl-0 observablehq--running" style="z-index:-1;pointer-events:none"></div>

  </div>


    <div class="container">

<div id="myModal" class="modal">

  <!-- Modal content -->
  <div class="modal-content">
    <div class="modal-header">
      <h2>Please go to the following location and press the buttons to verify  </h2>
    </div>
    <div class="modal-body">
        <h2 style="color:black" >{{ answer }} is your destination</h2>
        <div id="map" style="width: 100%; height: 500px;"></div>
      <button onclick="getLocation()">Submit My Location</button>

    </div>
    <div class="modal-footer">
      <h3>Modal Footer</h3>
    </div>
  </div>

</div>

    </div>
  </form>
</div>
</div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<script type = "text/javascript">
	function openNav() {
  		document.getElementById("myNav").style.width = "100%";
	}

	function closeNav() {
  		document.getElementById("myNav").style.width = "0%";
	}
    function sendRequest(){
        {% for questions in data %}
    var current_question =  {{ questions.node_num }}
        {% endfor %}
    $.ajax({
        url: "/update_request",
        type: "post",
        data: {current_question:current_question,'csrfmiddlewaretoken': "{{ csrf_token }}" },
        success:
        function(result){
            if (result == "Same Question"){
            setTimeout(function(){
                sendRequest(); //this will send request again and again;
            }, 1000);}
            else{
                location.reload(true);
            }
        },
        error: function() {
                    alert("failed")
                    location.reload(true);
                    setTimeout(function(){
                    sendRequest(); //this will send request again and again;
                     }, 5000);
                }
    });
    }
    $(window).bind("load",function(){
        sendRequest();
    })
    $(document).ready(function() {
        var hint_got = false;
        var a = "{{ score }}";
        document.getElementById("score").innerHTML = "High score : " + a ;
        $("#gethint").click(function (e) {
            if (hint_got == false) {
                a--;
                hint_got = true;
            }
            document.getElementById("score").innerHTML = "High score : " + a ;
			e.preventDefault();
            $.ajax({
                url: '/hint',
                type: "post",
                data :{score:a,'csrfmiddlewaretoken': "{{ csrf_token }}"},
                success: function (response) {
                    alert(response);
                },
                error: function(xhr, status, error) {
                    alert("error");
}
            });
        });
    });
    $(document).ready(function() {
        $("#button_1").click(function (){
            $.ajax({
                url:'/reset_question',
                success: function(response){

                }
            });
        });
    });
    var map_check = "True";
    $(window).bind("load",function(){
        map_check = "{{ map_check }}"
        if (map_check == "True"){
            document.getElementById('myModal').style.display='block';
            initMap();
        }
    });

</script>
<script>
var x = document.getElementById("demo");

var map, infoWindow, pos, marker, radi, circle;
//CHANGE This is the center coordinate for the circle for checking if player insde. Get this from the databse.
var circPos = {
lat: {{latitude}},
lng:{{ longtitude }}
}

//CHANGE This is the radius of circle. Get this from the database.
radi = 30;

	//Ran at loading of website, intiliazes the map.
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
		//Change this to the values of the circle. From the database
          center: circPos,
          zoom: 17
        });
        infoWindow = new google.maps.InfoWindow;
        // var marker = new google.maps.Marker({
        //   position: circPos,
        //   map: map,
        //   title: 'Hello World!'
        // });
        setCompletionZone(circPos, radi);
        infoWindow.open(map);






      }



	  //Checks if player in the circle
function pointInCircle(point, radius, circPos)
{


var p = new google.maps.LatLng(point.lat, point.lng );
var c = new google.maps.LatLng(circPos.lat, circPos.lng);

	if((google.maps.geometry.spherical.computeDistanceBetween(p, c)) >= radius )
	{
		//CHANGE this to whatever you want
		alert("This is your current location. You are not there.");
	}
	else{
		//CHANGE this to whatver you want.
		alert("This is your current location. You are there.");
		document.getElementById('myModal').style.display='none';
		setFalse();
	}
}


//Gets players current location
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition, showError);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

//Shows position of player on the map.
function showPosition(position) {

    pos = {
              lat: position.coords.latitude,
              lng: position.coords.longitude
            };

            map.setCenter(pos);
			map.setZoom(16);

			marker.setMap(null);

			marker = new google.maps.Marker({
					  map: map,
					  position: pos,
					  title: 'your location'
					});

			pointInCircle(pos, radi, circPos);
}

//Draws circle of the completion zone.
function setCompletionZone(posi, radi){

  					marker = new google.maps.Marker({
					  map: map,
					  position: posi,
					  title: 'circle centre'
					});

					circle = new google.maps.Circle({
					  map: map,
					  radius: radi,
					     strokeColor: '#FF0000',
					strokeOpacity: 0.8,
					strokeWeight: 2,
					fillColor: '#FF0000',
					fillOpacity: 0.35
					});
					circle.bindTo('center', marker, 'position');

					marker.setMap(null);


}

//Error handling for location request.
function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }



}

function setFalse(){
           $.ajax({
                url:'/set_map_false',
                success: function(response){

                }
            });
}



</script>

<script async defer
	src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBzaPwjwqJAXVNJh7Yhx50Xdvwb1h-FNV4&callback=initMap">
</script>
</body>
